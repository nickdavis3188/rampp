<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../www/css/responsive.css">
    <link rel="stylesheet" href="../www/css/bootstrap.min.css">
    <link rel="stylesheet" href="../www/vendors/ti-icons/css/themify-icons.css">
    <link rel="stylesheet" href="../www/css/style1.css">
    <link rel="shortcut icon" href="../www/images/icon.png" type="image/x-icon">
    <link rel="stylesheet" href="../www/css/s1.css">
    <link rel="shortcut icon" href="../www/css/dataTable.css" />
    <link rel="stylesheet" href="../www/css/fontawesome.min.css">
    <link rel="stylesheet" href="../www/css/jquery.dataTables.min.css">
   
    <title>fundRequisition</title>
</head>
<body>

    <br>
    <br>
    <br>
    <br>

    <div class="container">
        <!-- body -->
        <div class="table-responsive pt-3">
          <table class="table table-bordered">
            <tbody>
                                  
              <!-- head -->
              <tr>
                <td rowspan="2" colspan="2">
                  <div class="row">
                    <!-- <div class="col-md-6">
                      <img src="../../Upload/logo.jpeg"/ style="width:200px">
                    </div> -->
                    <div class="col-12">
                      <h5 style="color:#02679a;font-size:25px">Fund Requisition</h5>
                    <div>
                  </div>
                </td>                      
                <td colspan="3">
                  <div class="row">
                    
                    <div class="col-12"><span style="color:#02679a"> P-REGNO: </span>&nbsp;&nbsp;<span class="reqno"></span></div>
                  
                  </div>                                
                </td>                        
              </tr>
              <tr>                    
                <td colspan="3">
                  <div class="row">
                    <div class="col-12"><span style="color:#02679a"> DATE: </span>&nbsp;&nbsp;<span class="dprep"></span></div>
                   
                  </div>                                        
                </td>
              </tr>
              <!--End head -->
              <tr>
                <td colspan="2">
                  <div class="row">
                    <div class="col-12"><span style="color:#02679a"> For: </span>&nbsp;&nbsp;<span class="frrr"></span></div>
                    
                  </div>                                      
                </td>
                <td colspan="3">
                  <div class="row">
                    <div class="col-12"><span style="color:#02679a">TO: </span>&nbsp;&nbsp;<span class="to"></span></div>
                   
                  </div>                                      
                </td>
              </tr>
              <tr>
                <td colspan="2">
                  <div class="row">
                    <div class="col-12"><span style="color:#02679a"> REQUISITIONER: </span>&nbsp;&nbsp;<span class="reqner"></span></div>
                   
                  </div>  
                </td>
                                         
                  <td colspan="2">
                    <div class="row">
                      <div class="col-12"><span style="color:#02679a"> AMOUNT: </span>&nbsp;&nbsp;<span class="amm"></span></div>
                   
                    </div>  
                  </td>
              </tr>
              <tr>
                  <td colspan="2">
                    <div class="row">
                      <div class="col-12"><span style="color:#02679a"> AMOUNT WORD: </span>&nbsp;&nbsp;<span class="ammw"></span></div>
                    
                    </div>  
                  </td>
                  <td colspan="3">
                    <div class="row">
                      <div class="col-12"><span style="color:#02679a">JUSTIFICATION: </span>&nbsp;&nbsp;<span class="jus"></span></div>
                   
                    </div>  
                  </td>                                  
              </tr>
              
            
            </tbody>
          </table>
        </div>
        <br>
        <br>
        <hr>
        <div class="row ">
        <div class="col-4">
          <div class="sups text-center" style="line-height: 9px;font-size: x-small;">
              <p class="text-info">Pending</p>

        </div>
             
      </div>
      <div class="col-4">
        <div class="mns text-center" style="line-height: 9px;font-size: x-small;">
              <p class="text-info">Pending</p>
        </div>
          
      </div>
      <div class="col-4">
          <div class="mnds text-center" style="line-height: 9px;font-size: x-small;">
              <p class="text-info">Pending</p>
          </div>                            
      </div>
    </div>
    <hr/>
      </div>


    <script src="../www/js/jQuery1.9.1.js"></script>
    <!-- bootstrap JS
		============================================ -->
    <script src="../www/js/bootstrap.min.js"></script>
 
    <!-- plugins JS
		============================================ -->

    <script src="../www/js/plugins.js"></script>
     <!-- Data Table JS
		============================================ -->
    <script src="../www/js/jquery.dataTables.min.js"></script>
    <script src="../www/js/data-table-act.js"></script>


  <!-- plugins:js -->
  <script src="../www/vendors/base/vendor.bundle.base.js" ></script>
 
  <!-- endinject -->
  <!-- Plugin js for this page-->
  <!-- <script src="../../www/vendors/chart.js/Chart.min.js"></script> -->
  <script src="../www/js/jquery.cookie.js" type="text/javascript"></script>
  <!-- End plugin js for this page-->
  <!-- inject:js -->
  <script src="../www/js/off-canvas.js"></script>
  <script src="../www/js/hoverable-collapse.js"></script>
  <script src="../www/js/template.js"></script>
  
  <!-- endinject -->
  <!-- Custom js for this page-->
  <script src="../www/js/dashboard.js"></script>

  <script>



        let par = new URLSearchParams(window.location.search)
       let id = par.get("fregno")
        let reqno = document.querySelector(".reqno"); 
        let subj = document.querySelector(".frrr"); 
        let from = document.querySelector(".reqner"); 
        let dateprep = document.querySelector(".dprep"); 
        // let summ = document.querySelector(".summ");  
        // let tbodyy = document.querySelector("#tbb"); 
        let manStatus = document.querySelector(".mns"); 
        let manDStatus = document.querySelector(".mnds"); 
        let supStatus = document.querySelector(".sups"); 
        let amount = document.querySelector(".amm"); 
        let amountword = document.querySelector(".ammw"); 
        let justification = document.querySelector(".jus"); 
        let to = document.querySelector(".to"); 
      
        const dateFormat = (date)=>{
          var today = new Date(date);
          var dd = String(today.getDate()).padStart(2, '0');
          var mm = String(today.getMonth() + 1).padStart(2, '0'); 
          var yyyy = today.getFullYear();

          // today = mm + '/' + dd + '/' + yyyy;
          today = dd + '/' + mm + '/' + yyyy;
          return today
        }
    
        let mydata = JSON.stringify({ "fRegNo":id })
        fetch("../Utils/getSingleFundRegUtils.php", {
        method: 'POST',
        body: mydata,
        headers: {"Content-Type": "application/json; charset=utf-8"}
        }).then(res=>res.json()).then(function(data) 
        {
    
          // console.log(data)
   
    
            reqno.innerText = data.fregno
            dateprep.innerText = dateFormat(data.datecreated)
            subj.innerText = data.subject
            from.innerText = data.from
            // summ.innerText = data.summary
            amount.innerText = "#"+Number(data.ammount).toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,')
            amountword.innerText = data.ammountword
            justification.innerText = data.justification
            to.innerText = data.to
    
    
     
            let manstat = ()=>{
        let child = manStatus.lastElementChild; 
        while (child) {
          manStatus.removeChild(child);
            child = manStatus.lastElementChild;
        }
        if (data.manstatus == "Pending") {
          manStatus.innerHTML = `<p class="text-warning">Pending</p><br/><p class="text-warning">Manager</p><br/><p class="text-warning">${data.manremark}</p><br/><p class="text-warning">${dateFormat(data.mandate)}</p>` 
        } else if(data.manstatus == "decline") {
          manStatus.innerHTML = `<p class="text-danger">Decline</p><br/><p class="text-danger">Manager</p><br/><p style="color:#02679a">${data.manremark}</p><br/><p class="text-danger">${dateFormat(data.mandate)}</p>`         
        }else{
          if (data.mansig) {
            manStatus.innerHTML = `<img src="${data.mansig}" width="100px"/><br/><p class="text-success">Manager</p><br/><p class="text-success">${data.manremark}</p><br/><p class="text-success">${dateFormat(data.mandate)}</p>` 
            
          } else {
            manStatus.innerHTML = `<p class="text-success">Approve</p><br/><br/><p class="text-success">Manager</p><p class="text-success">${data.manremark}</p><br/><p class="text-success">${dateFormat(data.mandate)}</p>`
          }
        }
      }
     
      let mandstat = ()=>{
        let child = manDStatus.lastElementChild; 
        while (child) {
          manDStatus.removeChild(child);
            child = manDStatus.lastElementChild;
        }
        if (data.mandsatus == "Pending") {
          manDStatus.innerHTML = `<p class="text-warning">Pending</p><br/><p class="text-warning">Managing Director</p><br/><p class="text-warning">${data.mandremark}</p><br/><p class="text-warning">${dateFormat(data.manddate)}</p>` 
        } else if(data.mandsatus == "decline") {
          manDStatus.innerHTML = `<p class="text-danger">Decline</p><br/><p class="text-danger">Managing Director</p><br/><p style="color:#02679a">${data.mandremark }</p><br/><p class="text-danger">${dateFormat(data.manddate)}</p>`         
        }else{
          if (data.mandsig) {
            manDStatus.innerHTML = `<img src="${data.mandsig}" width="100px"/><br/><p class="text-success">Managing Director</p><br/><p class="text-success">${data.mandremark}</p><br/><p class="text-success">${dateFormat(data.manddate)}</p>` 
          } else {
            manDStatus.innerHTML = `<p class="text-success">Approve</p><br/><p class="text-success">Managing Director</p><br/><p class="text-success">${data.mandremark}</p><br/><p class="text-success">${dateFormat(data.manddate)}</p>`   
          }
        }
      }
    

      let supstat = ()=>{
        let child = supStatus.lastElementChild; 
        while (child) {
          supStatus.removeChild(child);
            child = supStatus.lastElementChild;
        }
        if (data.supstatus == "Pending") {
          supStatus.innerHTML = `<p class="text-warning">Pending</p><br/><p class="text-warning">Supervisor</p><br/><p class="text-warning">${data.supremark }</p><br/><p class="text-warning">${dateFormat(data.supdate)}</p>` 
        } else if(data.supstatus == "decline") {
          supStatus.innerHTML = `<p class="text-danger">Decline</p><br/><p class="text-danger">Supervisor</p><br/><p style="color:#02679a">${data.supremark }</p><br/><p class="text-danger">${dateFormat(data.supdate)}</p>`         
        }else{
          if (data.supsig) {
            supStatus.innerHTML = `<img src="${data.supsig}" width="100px"/><br/><p class="text-success">Supervisor</p><br/><p class="text-success">${data.supremark }</p><br/><p class="text-success">${dateFormat(data.supdate)}</p>`          
          } else {
            supStatus.innerHTML = `<p class="text-success">Approve</p><br/><p class="text-success">Supervisor</p><br/><p class="text-success">${data.supremark }</p><br/><p class="text-success">${dateFormat(data.supdate)}</p>` 
          }
        }
      }
     
      manstat()
      mandstat()
      supstat()
         
    
          window.print()
        }).catch(err=>{
          if (err) {
            alert("Error:"+err)
            console.log("error",err)
         
          }
        })
    
    
    </script>
</body>
</html>